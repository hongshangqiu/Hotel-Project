# 测试指南

本文档指导你如何测试易宿酒店预订平台的已完成功能。

## 测试前准备

### 方式一：H5 网页端测试（推荐）

```powershell
# 在终端中运行
cd "E:\1\02\Hotel-Project"
npm run dev:h5
```

启动成功后，浏览器访问：**http://localhost:10086**

> 💡 H5端会自动根据浏览器窗口宽度切换 PC/移动端布局，适合测试响应式效果。

### 方式二：微信小程序端测试

```powershell
# 在终端中运行
npm run dev:weapp
```

启动成功后，使用微信开发者工具打开 `E:\1\02\Hotel-Project\dist` 目录。

---

## 测试用例

### 测试用例 1：管理员登录

**测试目标**：验证登录功能和角色切换

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 输入账号：`admin` | 账号输入框显示 `admin` |
| 2 | 输入密码：`123456` | 密码输入框显示 `******` |
| 3 | 选择角色：**管理员** | 角色选项高亮显示 |
| 4 | 点击 **登录** 按钮 | 按钮显示 loading，1秒后提示"登录成功" |
| 5 | 自动跳转 | 页面跳转至审核管理页 (`/pages/admin/audit/index`) |

**验证点**：
- [ ] 登录按钮有 loading 状态
- [ ] 登录成功后 URL/页面变化
- [ ] Layout 变为 PC 端侧边栏布局

---

### 测试用例 2：商户登录

**测试目标**：验证商户角色登录

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 输入账号：`merchant` | 账号输入框显示 `merchant` |
| 2 | 输入密码：`123456` | 密码输入框显示 `******` |
| 3 | 选择角色：**商户** | 角色选项高亮显示 |
| 4 | 点击 **登录** 按钮 | 按钮显示 loading，1秒后提示"登录成功" |
| 5 | 自动跳转 | 页面跳转至酒店管理页 (`/pages/admin/manage/index`) |

---

### 测试用例 3：响应式布局切换（PC端）

**测试目标**：验证 PC 端 Layout 侧边栏布局

**前提**：使用 H5 端，浏览器窗口宽度 > 768px

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 登录管理员账号 | 页面显示左侧深色侧边栏 |
| 2 | 查看侧边栏内容 | 包含"逸宿 Admin"Logo |
| 3 | 查看菜单项 | 显示：首页、酒店管理、审核管理 |
| 4 | 点击 **退出登录** | 页面跳转回登录页 |

**验证点**：
- [ ] 左侧 220px 宽度侧边栏（深色背景）
- [ ] 右侧主内容区
- [ ] 顶部有页面标题栏
- [ ] 用户名显示在侧边栏底部
- [ ] 退出登录按钮可用

---

### 测试用例 4：响应式布局切换（移动端模拟）

**测试目标**：验证移动端 Layout 布局

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 缩小浏览器窗口至 < 768px 宽度 | Layout 自动切换为移动端样式 |
| 2 | 查看顶部 | 显示"逸宿"标题 + 退出按钮 |
| 3 | 点击 **退出** | 返回登录页 |

**验证点**：
- [ ] 无侧边栏，显示顶部标题栏
- [ ] 退出按钮在右上角
- [ ] 布局紧凑，适合移动端浏览

---

### 测试用例 5：用户端首页 - Banner 轮播

**测试目标**：验证首页轮播图

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 浏览器访问 `http://localhost:10086/pages/user/index/index` | 显示首页 |
| 2 | 查看顶部 Banner | 轮播图自动播放，两张酒店图片交替显示 |
| 3 | 手动点击轮播点 | 跳转到对应图片 |

**验证点**：
- [ ] 顶部 Banner 宽度 100%
- [ ] 有指示 dots（轮播点）
- [ ] 自动循环播放

---

### 测试用例 6：用户端首页 - 日期选择

**测试目标**：验证日历组件和日期校验

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 点击 **入住日期** 行 | 弹出日历组件 |
| 2 | 选择入住日期（如今天+3天） | 日历关闭，日期显示在输入框 |
| 3 | 点击 **离店日期** 行 | 弹出日历（默认选入住模式） |
| 4 | 选择离店日期（如今天+5天） | 日历关闭，日期显示 |
| 5 | 尝试选择过去的日期 | 提示"不能选择过去的日期" |
| 6 | 先选离店，再选入住，且离店早于入住 | 提示"注意：离店早于入住" |

**验证点**：
- [ ] 点击日期行弹出日历弹窗
- [ ] 有"选入住"/"选离店"切换
- [ ] 不能选择过去的日期
- [ ] 日期格式正确：`YYYY-MM-DD`

---

### 测试用例 7：用户端首页 - 搜索跳转

**测试目标**：验证搜索条件校验和页面跳转

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 不选择日期，直接点击 **查询酒店** | 提示"日期范围无效，请修正后查询" |
| 2 | 填入目的地：`北京` | 输入框显示"北京" |
| 3 | 选择入离日期 | 日期显示在对应位置 |
| 4 | 点击 **查询酒店** 按钮 | 页面跳转至酒店列表页 (`/pages/user/list/index`) |

**验证点**：
- [ ] 未填日期时查询按钮禁用/提示
- [ ] 查询成功后 URL 跳转

---

### 测试用例 8：用户端 - 酒店列表分页加载

**测试目标**：验证列表加载和触底分页

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 进入酒店列表页 | 显示"共发现 X 家酒店" |
| 2 | 查看列表 | 显示酒店卡片列表（模拟数据） |
| 3 | 向上滑动至底部 | 底部显示"正在拼命加载..." |
| 4 | 等待加载完成 | 列表新增更多酒店 |
| 5 | 继续滑到底部 | 显示"—— 到底啦 ——"（到底了） |

**验证点**：
- [ ] 列表显示酒店图片、名称、星级、地址、价格
- [ ] 点击酒店卡片可跳转详情页（当前显示空白）
- [ ] 触底自动加载更多
- [ ] 加载完成后显示"到底啦"

---

### 测试用例 9：商户信息录入页（空壳测试）

**测试目标**：验证商户端页面可访问

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 登录商户账号 | 进入商户管理页 |
| 2 | 查看页面布局 | 显示 Layout（PC端侧边栏） |
| 3 | 查看内容区 | 显示 "Hotel Manage Page" |

---

### 测试用例 10：管理员审核页（空壳测试）

**测试目标**：验证管理员审核页可访问

**操作步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 登录管理员账号 | 进入审核管理页 |
| 2 | 查看页面布局 | 显示 Layout（PC端侧边栏） |
| 3 | 查看内容区 | 显示 "Hotel Audit Page" |

---

## 测试账号汇总

| 角色 | 账号 | 密码 | 跳转页面 |
|------|------|------|----------|
| 管理员 | `admin` | `123456` | 审核页 |
| 商户 | `merchant` | `123456` | 录入页 |

> 💡 当前登录为 Mock 数据，无需真实后端。

---

## 测试检查清单

### 登录模块
- [ ] 管理员登录成功 → 审核页
- [ ] 商户登录成功 → 录入页
- [ ] 未登录状态下直接访问管理页 → 会显示 Layout 但无用户信息

### 响应式布局
- [ ] PC端（>768px）→ 侧边栏布局
- [ ] 移动端（<768px）→ 顶部标题栏布局
- [ ] 登录页 → 无 Layout 全屏显示

### 用户端功能
- [ ] Banner 轮播图正常播放
- [ ] 日历弹出、日期选择正常
- [ ] 日期校验（不能选过去、离店需晚于入住）
- [ ] 搜索条件校验 → 列表页跳转
- [ ] 酒店列表分页加载
- [ ] 列表卡片点击 → 详情页跳转

### 组件功能
- [ ] StarRating 组件待详情页完成后测试
- [ ] Calendar 组件在首页已完整测试

---

## 常见问题

### Q1: 登录后页面空白？
确保 `npm run dev:h5` 正在运行，刷新页面重试。

### Q2: 微信小程序端看不到变化？
微信开发者工具需要点击"编译"按钮刷新。

### Q3: Layout 没有切换 PC/移动端？
刷新页面，Layout 会在 `useEffect` 中检测屏幕宽度。

### Q4: 日历无法选择日期？
检查控制台是否有报错，确保 `useHotelStore` 状态正常。

---

## 后续开发测试预告

### 待开发功能测试用例（完成后补充）

| 功能 | 预估开发量 | 预计测试点 |
|------|-----------|-----------|
| 酒店详情页 | 1-2 天 | 图片展示、评分、预订按钮 |
| 商户录入页 | 2-3 天 | 表单验证、图片上传、提交 |
| 管理员审核页 | 2 天 | 列表、审核操作、状态变更 |
